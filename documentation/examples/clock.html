<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<link rel="stylesheet" href="../style.css" type="text/css" />
	<script type="text/javascript" src="../../cajal.js"></script>
	<title>Examples: beautiful clock with cajal - canvas javascript library</title>
</head>
<body>
<div id="wrapper">
	<ol id="nav">
		<li><a href="../index.html">Documentation</a></li>
		<li><a href="../function-reference.html">Function Reference</a></li>
		<li>
			<a href="shapes.html" class='active'>Examples</a>
			<ul>
				<li><a href="shapes.html">Basic shapes</a></li>
				<li><a href="animations.html">Animations</a></li>
				<li><a href="bars.html">Bar chart</a></li>
				<li><a href="particular.html">Particle explosion</a></li>
                <li><a href="clock.html" class='active'>Clock</a></li>
			</ul>
		</li>
	</ol>
	<div id="content">
		<h1>Circular Clock</h1>
		<div class="inner">

			<canvas id="canvas" height="300" width="620"></canvas>
			<script type="text/javascript">
            var c = new cajal('canvas');

            var animHour = function (f,t) {
                c.get('h').p.angle += cajal.Ease.expInOut(30,f,t,2);
                if (f===t) {
                    var date = new Date();
                    c.get('h').p.angle = 30 * date.getHours();
                    var ap = 'AM';
                    if (date.getHours() >= 12) {
                        ap = 'PM';
                    }
                    c.get('ap').text(ap);
                }
            }

            var animMin = function (f,t) {
                c.get('min').p.angle += cajal.Ease.expInOut(6,f,t,2);
                if (f===t) {
                    var date = new Date();
                    c.get('min').p.angle = 6 * date.getMinutes();
                    if (c.get('min').p.angle === 0) {
                        this.animate(animHour,60);
                    }
                }
            }

            var animSec = function (f,t) {
                c.get('sec').p.angle += 6/30;
                if (Math.floor(c.get('sec').p.angle%360) === 0) {
                    var date = new Date();
                    c.get('sec').p.angle = 6 * date.getSeconds();
                    this.animate(animMin,60);
                }
            }

            var init = function () {
                var center = {
                    x: c.canvas.width/2,
                    y: c.canvas.height/2
                }
                var date = new Date();

                var sec = new cajal.Segment(center.x, center.y, 50, 6 * date.getSeconds()).options({width:10,stroke:'rgba(255,0,0,0.7)'}).rotate(-90);
                var min = new cajal.Segment(center.x, center.y, 35, 6 * date.getMinutes()).options({width:10,stroke:'rgba(0,255,0,0.7)'}).rotate(-90);
                var h =   new cajal.Segment(center.x, center.y, 20, 30 * date.getHours()).options({width:10,stroke:'rgba(255,255,0,0.7)'}).rotate(-90);
                
                var ap = 'AM';
                if (date.getHours() >= 12) {
                    ap = 'PM';
                }
                
                var text = new cajal.Text(center.x-9, center.y+4, ap).options({
                    font: '12px Hevetica, Arial, sans-serif',
                    fill: 'rgba(0,0,0,0.8)'
                });
                c.add('sec',sec).add('min',min).add('h',h).add('ap',text);
            }
            
            init();
            c.animate(animSec);

			</script><br/>
			<h3>Code</h3>
			<pre>
&lt;canvas id="canvas" height="200" width="400"&gt;&lt;/canvas&gt;
&lt;script type="text/javascript"&gt;
&lt;/script&gt;
			</pre>

		</div>
	</div>
</div>
<div style="clear:both;padding-bottom:20px;"></div>
</body>
</html>
